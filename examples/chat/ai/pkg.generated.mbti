// Generated using `moon info`, DON'T EDIT IT
package "example-chat/ai"

// Values
pub fn create_client_from_env(system_prompt? : String, max_tokens? : Int) -> BoxedAIClient?

pub fn escape_json_string(String) -> String

pub fn execute_tool(String, String) -> String

pub fn get_claude_tool_definitions() -> String

pub fn get_openai_tool_definitions() -> String

pub fn js_get_cwd() -> String

pub fn js_git_changed_files(String) -> String

pub fn js_git_diff_file(String) -> String

pub fn js_git_status(String) -> String

pub fn js_list_dir_json(String) -> String

pub fn js_path_basename(String) -> String

pub fn js_path_dirname(String) -> String

pub fn js_path_join(String, String) -> String

pub fn js_read_file_content(String) -> String

pub fn js_stop_watch() -> Unit

pub fn js_watch_directory(String, () -> Unit) -> Unit

pub fn js_write_file(String, String) -> String

pub fn messages_to_json(Array[Message]) -> String

// Errors

// Types and methods
pub(all) struct AIConfig {
  api_key : String
  model : String
  max_tokens : Int
  system_prompt : String
  provider : AIProvider
}
pub fn AIConfig::new(String, String, max_tokens? : Int, system_prompt? : String, provider? : AIProvider) -> Self

pub(all) enum AIProvider {
  Claude
  OpenRouter
}
pub fn AIProvider::to_string(Self) -> String

pub(all) struct BoxedAIClient {
  inner : &AIClient
}
pub fn BoxedAIClient::config(Self) -> AIConfig
pub fn BoxedAIClient::model_name(Self) -> String
pub fn BoxedAIClient::provider_name(Self) -> String
pub fn BoxedAIClient::stream(Self, Array[Message], (String) -> Unit, () -> Unit, (String) -> Unit) -> Unit
pub fn BoxedAIClient::stream_with_tools(Self, Array[Message], (String) -> Unit, (String, String, String) -> String, () -> Unit, (String) -> Unit) -> Unit

pub(all) struct ClaudeClient {
  ai_config : AIConfig
}
pub fn ClaudeClient::from_env(model? : String, max_tokens? : Int, system_prompt? : String) -> Self?
pub fn ClaudeClient::new(AIConfig) -> Self
pub impl AIClient for ClaudeClient

pub(all) struct Message {
  role : Role
  content : String
}

pub(all) struct OpenRouterClient {
  ai_config : AIConfig
}
pub fn OpenRouterClient::from_env(model? : String, max_tokens? : Int, system_prompt? : String) -> Self?
pub fn OpenRouterClient::new(AIConfig) -> Self
pub impl AIClient for OpenRouterClient

pub(all) enum Role {
  User
  Assistant
  System
}
pub fn Role::to_string(Self) -> String

pub(all) enum StreamEvent {
  TextDelta(String)
  ToolUse(ToolCall)
  MessageStop
  Error(String)
}

pub(all) struct ToolCall {
  id : String
  name : String
  input_json : String
}

pub(all) struct ToolResult {
  tool_use_id : String
  content : String
  is_error : Bool
}

pub(all) enum ToolType {
  ReadFile
  WriteFile
  ListDir
  RunCommand
}
pub fn ToolType::name(Self) -> String

// Type aliases

// Traits
pub(open) trait AIClient {
  stream(Self, Array[Message], (String) -> Unit, () -> Unit, (String) -> Unit) -> Unit
  stream_with_tools(Self, Array[Message], (String) -> Unit, (String, String, String) -> String, () -> Unit, (String) -> Unit) -> Unit
  config(Self) -> AIConfig
}

